(()=>{"use strict";const e={taskList:JSON.parse(localStorage.getItem("tasks"))||[],body:document.body,themeSwitch:document.querySelector("#themeSwitch"),addTaskForm:document.querySelector("#addTaskForm"),addTaskName:document.querySelector("#addTaskName"),addTaskTime:document.querySelector("#addTaskTime"),viewTask:document.querySelector("#viewTask"),loader:document.querySelector("#loader"),app:document.querySelector("#app"),taskStatus:".task__status",taskTime:".task__time",taskDel:".task__del"};function t(e="TEST MESSAGE",t="error"){const a=document.createElement("div");a.className=`message-box ${t}`;const s=document.createElement("span");s.className="message-box__icon",s.innerHTML={success:"✔️",error:"❌",warning:"⚠️",info:"ℹ️"}[t]||"ℹ️";const n=document.createElement("span");n.className="message-box__close",n.innerHTML="&times;",n.onclick=()=>a.remove(),a.appendChild(s),a.appendChild(document.createTextNode(e)),a.appendChild(n),document.body.appendChild(a),setTimeout(()=>a.classList.add("show"),10),setTimeout(()=>{a.classList.remove("show"),setTimeout(()=>a.remove(),400)},4e3)}function a(e,t){if(t.innerHTML="",0===e.length){const e=document.createElement("div");e.className="task-null",e.innerText="No task for you...!",t.appendChild(e)}else e.forEach(e=>{!function(e,t,a,s){const n=document.createElement("div");n.className="task";const i=document.createElement("div");i.className="task__effect",i.id=a;const o=document.createElement("p");o.className="task__title",o.textContent=e;const l=document.createElement("div");l.className="task__action";const c=document.createElement("input");c.type="checkbox",c.checked=t,c.id="taskStatus",c.className="task__status",c.id=a;const d=document.createElement("span");d.className="task__del fa-solid fa-xmark",d.id=a;const m=document.createElement("span");m.id="taskTime",m.className="task__time fa-solid fa-play",m.id=a,l.appendChild(m),l.appendChild(c),l.appendChild(d),n.appendChild(i),n.appendChild(o),n.appendChild(l),s.appendChild(n)}(e.taskName,e.taskStatus,e.id,t)})}function s(e){e.value=""}function n(e,t,s){document.querySelectorAll(e).forEach(n=>{n.addEventListener("click",i=>{if(".task__status"===e&&t.forEach(e=>{e.id===n.id&&(e.taskStatus=i.target.checked)}),".task__del"===e){const e=t.findIndex(e=>e.id===n.id);-1!==e&&(t.splice(e,1),n.closest(".task").remove())}localStorage.setItem("tasks",JSON.stringify(t)),a(t,s)})})}function i(e,t,a="null",s="null"){return"isNull"===e?Array.isArray(t)?0===t.length:""===t:"isExist"===e?a.some(e=>e[s]===t):void 0}const o=e.addTaskForm,l=e.taskList,c=e.addTaskName,d=e.addTaskTime,m=e.viewTask,r=e.taskDel,u=e.taskStatus,k=e.taskTime;function p(){var e,s,i;a(l,m),n(u,l,m),n(r,l,m),e=k,s=l,i=m,document.querySelectorAll(e).forEach(e=>{let a=!1,o=null,l=null,c=null;e.addEventListener("click",d=>{const m=d.target.id,r=s.find(e=>String(e.id)===m);if(!r||0===r.time)return void t("No set time for this task!","info");const u=e.closest(".task"),k=u.querySelector(".task__effect");if(a){a=!1;const e=Date.now()-l.startTime,t=(l.totalTime-e)/1e3;k.style.animationPlayState="paused",clearTimeout(c),r.remainingTime=+t.toFixed(1),d.target.className="task__time fa-solid fa-play"}else{a=!0,o=Date.now();const e=1e3*(r.remainingTime??r.time);k.style.animation=`growBar ${e/1e3}s linear forwards`,k.style.animationPlayState="running",d.target.className="task__time fa-solid fa-pause",l={totalTime:e,startTime:o},c=setTimeout(()=>{a=!1,r.remainingTime=0,k.style.animationPlayState="paused",d.target.className="task__time fa-solid fa-play",t("task time is end","info"),r.taskStatus=!0;const e=u.querySelector(".task__status");e&&(e.checked=!0),n(".task__status",s,i)},e)}})})}const f=e.body,h=e.themeSwitch;window.addEventListener("load",()=>{e.loader&&e.app&&setTimeout(()=>{e.loader.style.display="none",e.app.style.display="block"},2e3),"dark"===localStorage.getItem("theme")?(f.classList.add("dark"),h.checked=!0):(f.classList.remove("dark"),h.checked=!1),h.addEventListener("change",()=>{const e=h.checked;f.classList.toggle("dark",e),localStorage.setItem("theme",e?"dark":"light")}),o.addEventListener("submit",function(e){e.preventDefault();let a=i("isNull",c.value),n=i("isExist",c.value,l,"taskName");if(a)t("Please enter taskname");else if(n)t("this task is exist");else{let e={taskName:c.value,taskStatus:!1,id:c.value,time:""===d.value?0:Number(d.value)};l.push(e),localStorage.setItem("tasks",JSON.stringify(l)),p(),s(c),s(d)}}),p()})})();